<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments/layout :: head"></head>

<body>

    <nav th:replace="fragments/layout :: navbar"></nav>

    <div class="container my-5">
        <h3>Edit Expense</h3>
        <hr>

        <form action="#" th:action="@{/saveExpense}" th:object="${expense}" method="POST">

            <!-- Hidden ID field is crucial for Update -->
            <input type="hidden" th:field="*{id}" />

            <div class="mb-3">
                <label for="description" class="form-label">Description</label>
                <input type="text" th:field="*{description}" class="form-control" id="description"
                    placeholder="Expense Description">
                <div class="text-danger" th:if="${#fields.hasErrors('description')}" th:errors="*{description}"></div>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="amount" class="form-label">Amount</label>
                    <input type="number" step="0.01" th:field="*{amount}" class="form-control" id="amount"
                        placeholder="0.00">
                    <div class="text-danger" th:if="${#fields.hasErrors('amount')}" th:errors="*{amount}"></div>
                </div>

                <div class="col-md-6 mb-3">
                    <label for="date" class="form-label">Date</label>
                    <input type="date" th:field="*{date}" class="form-control" id="date">
                    <div class="text-danger" th:if="${#fields.hasErrors('date')}" th:errors="*{date}"></div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="category" class="form-label">Category</label>
                    <select th:field="*{category}" class="form-select" id="category">
                        <option value="" disabled>Select Category</option>
                        <option th:each="cat : ${categories}" th:value="${cat.displayName}"
                            th:text="${cat.displayName}"></option>
                    </select>
                    <div class="text-danger" th:if="${#fields.hasErrors('category')}" th:errors="*{category}"></div>
                </div>

                <div class="col-md-6 mb-3">
                    <label for="paymentMode" class="form-label">Payment Mode</label>
                    <select th:field="*{paymentMode}" class="form-select" id="paymentMode">
                        <option value="" disabled>Select Payment Mode</option>
                        <option th:each="mode : ${paymentModes}" th:value="${mode.displayName}"
                            th:text="${mode.displayName}"></option>
                    </select>
                    <div class="text-danger" th:if="${#fields.hasErrors('paymentMode')}" th:errors="*{paymentMode}">
                    </div>
                </div>
            </div>

            <button type="submit" class="btn btn-warning col-2"> Update Expense </button>
            <a th:href="@{/}" class="btn btn-secondary col-2"> Back </a>
        </form>
    </div>

</body>

</html>